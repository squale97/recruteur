"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[519],{5519:(x,m,i)=>{i.r(m),i.d(m,{EditOffreModule:()=>I});var c=i(6814),g=i(95),Z=i(9252),E=i(1122),A=i(7507),v=i(707),O=i(1913),y=i(74),f=i(9310),h=i(9862),p=i(553),e=i(4946),T=i(2352),M=i(3714),C=i(7680);function J(t,s){1&t&&e._UZ(0,"p-progressSpinner",18)}let N=(()=>{var t;class s{constructor(d,n,l){this.route=d,this.http=n,this.router=l,this.loading=!1}getOffreById(){var d=p.N.baseUrl+"emploiById";sessionStorage.getItem("id"),this.route.queryParams.subscribe(r=>{this.id=r.id,this.dropdownItems=["CDD","STAGE","CDI","AUTRE"]});const l={headers:new h.WM({"Content-Type":"application/json",Authorization:"Basic "+btoa(p.N.userAuth+":"+p.N.passAuth)})},o=JSON.stringify({id:this.id});this.http.post(d,o,l).subscribe(r=>{null==r||(this.nom=r.contenu[0].nom,this.lieu=r.contenu[0].lieu,this.structure=r.contenu[0].structure,this.anneeExp=r.contenu[0].nbExperience,this.validiteTest=r.contenu[0].validite,this.description=r.contenu[0].description,this.date=r.contenu[0].dateFin)},r=>{console.log(r.status),console.error("\xc9chec de la connexion :",r.status)})}updateEmploi(){this.loading=!0,this.route.queryParams.subscribe(a=>{this.id=a.id});let d=JSON.stringify({nom:this.nom,lieu:this.lieu,structure:this.structure,type:this.selectedType,validite:this.validiteTest,dateFin:this.date,description:this.description,id:this.id,nbExperience:this.anneeExp});var n=p.N.baseUrl+"update/emploi";const l={headers:new h.WM({"Content-Type":"application/json",Authorization:"Basic "+btoa(p.N.userAuth+":"+p.N.passAuth)})};this.http.post(n,d,l).subscribe(a=>{this.loading=!1,this.router.navigateByUrl("/table/offre")},a=>{console.log(a.status),console.error("\xc9chec de la connexion :",a.status)})}ngOnInit(){this.validite="valide"==this.validiteTest?["valide","invalide"]:["invalide","valide"],this.getOffreById()}}return(t=s).\u0275fac=function(d){return new(d||t)(e.Y36(f.gz),e.Y36(h.eN),e.Y36(f.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:48,vars:12,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"card","p-fluid"],[1,"field"],[1,"p-formgrid","grid"],[1,"field","col"],["htmlFor","name2"],["pInputText","","id","name2","type","text",3,"ngModel","ngModelChange"],["htmlFor","email2"],["pInputText","","id","email2","type","text",3,"ngModel","ngModelChange"],["htmlFor","name1"],["pInputText","","id","name1","type","number",3,"ngModel","ngModelChange"],[3,"options","ngModel","ngModelChange"],["pInputText","","id","email2","type","date",3,"ngModel","ngModelChange"],["rows","4","cols","12","pInputText","","id","email2","type","text",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Valider",3,"disabled","click"],["id","spinE",4,"ngIf"],["id","spinE"]],template:function(d,n){1&d&&(e.TgZ(0,"div",0)(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4"),e._uU(5,"Modifier l'offre"),e.qZA(),e.TgZ(6,"div",3)(7,"h5"),e._uU(8,"D\xe9tails de l'offre"),e.qZA(),e.TgZ(9,"div",4)(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13,"Nom"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(o){return n.nom=o}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",7),e._uU(17,"Lieu"),e.qZA(),e.TgZ(18,"input",8),e.NdJ("ngModelChange",function(o){return n.lieu=o}),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",6)(21,"label",9),e._uU(22,"Structure"),e.qZA(),e.TgZ(23,"input",10),e.NdJ("ngModelChange",function(o){return n.structure=o}),e.qZA()(),e.TgZ(24,"div",6)(25,"label",11),e._uU(26,"Ann\xe9es d'exp\xe9rience r\xe9quis"),e.qZA(),e.TgZ(27,"input",12),e.NdJ("ngModelChange",function(o){return n.anneeExp=o}),e.qZA()()(),e.TgZ(28,"div",5)(29,"div",6)(30,"label",7),e._uU(31,"Type"),e.qZA(),e.TgZ(32,"p-dropdown",13),e.NdJ("ngModelChange",function(o){return n.selectedType=o}),e.qZA()(),e.TgZ(33,"div",6)(34,"label",9),e._uU(35,"Date de Fin"),e.qZA(),e.TgZ(36,"input",14),e.NdJ("ngModelChange",function(o){return n.date=o}),e.qZA()(),e.TgZ(37,"div",6)(38,"label",9),e._uU(39,"Validit\xe9"),e.qZA(),e.TgZ(40,"p-dropdown",13),e.NdJ("ngModelChange",function(o){return n.validiteTest=o}),e.qZA()()(),e.TgZ(41,"div",6)(42,"label",9),e._uU(43,"Description"),e.qZA(),e.TgZ(44,"textarea",15),e.NdJ("ngModelChange",function(o){return n.description=o}),e.qZA()(),e.TgZ(45,"div",6)(46,"button",16),e.NdJ("click",function(){return n.updateEmploi()}),e.qZA()(),e.YNc(47,J,1,0,"p-progressSpinner",17),e.qZA()()()()()()),2&d&&(e.xp6(14),e.Q6J("ngModel",n.nom),e.xp6(4),e.Q6J("ngModel",n.lieu),e.xp6(5),e.Q6J("ngModel",n.structure),e.xp6(4),e.Q6J("ngModel",n.anneeExp),e.xp6(5),e.Q6J("options",n.dropdownItems)("ngModel",n.selectedType),e.xp6(4),e.Q6J("ngModel",n.date),e.xp6(4),e.Q6J("options",n.validite)("ngModel",n.validiteTest),e.xp6(4),e.Q6J("ngModel",n.description),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[c.O5,g.Fj,g.wV,g.JJ,g.On,v.Hq,T.Lt,M.o,C.G],encapsulation:2}),s})(),b=(()=>{var t;class s{}return(t=s).\u0275fac=function(d){return new(d||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild([{path:"",component:N}]),f.Bz]}),s})();var U=i(6218);let I=(()=>{var t;class s{}return(t=s).\u0275fac=function(d){return new(d||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,g.u5,Z.S,E.$9,A.U$,O.l,y.ml,v.hJ,b,T.kW,M.j,U.A,C.L]}),s})()}}]);